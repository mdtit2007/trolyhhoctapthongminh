<head>
    <title>Lịch học, lịch thi theo tuần</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />

    <link href="~/Content/lichhoc.css" rel="stylesheet" />
    <!-- Thêm Flatpickr CSS -->
    <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">

        <div class="filters">
            <input type="radio" id="all" name="filter" checked>
            <label for="all">Tất cả</label>
            <input type="radio" id="schedule" name="filter">
            <label for="schedule">Lịch học</label>
            <input type="radio" id="exam" name="filter">
            <label for="exam">Lịch thi</label>
            <input type="radio" id="sk" name="filter">
            <label for="sk">Sự kiện khác</label>
            <input id="currentDate" type="text" placeholder="">
            <button id="current-week" class="btn btn-sm btn-success">Hiện tại</button>
            <button id="previous-week" class="btn btn-sm btn-success">Trở về</button>
            <button id="next-week" class="btn btn-sm btn-success">Tiếp</button>
        </div>

        <div id="schedule-container">
            @Html.Action("PartialSchedule", "Schedule", new { weekOffset = 0 })
        </div>

        <!-- Legend section -->
        <div class="legend">
            <div><span class="theory"></span> Lịch học lý thuyết</div>
            <div><span class="practice"></span> Lịch học thực hành</div>
            <div><span class="online"></span> Lịch học trực tuyến</div>
            <div><span class="exam"></span> Lịch thi</div>
            <div><span class="suspend"></span> Lịch tạm ngưng</div>
        </div>
    </div>

</body>
@section scripts{
    <script src="~/Scripts/lichhoc.js"></script>
    <script>

    $(document).ready(function () {
    // Lắng nghe sự kiện thay đổi radio button
    $("input[name='filter']").change(function () {
        var selectedFilter = $("input[name='filter']:checked").attr('id');
        var weekOffset = $("#weekOffset").val();  // Lấy giá trị weekOffset nếu có

        // Gửi request lại về PartialSchedule với filterType
        $.ajax({
            url: '@Url.Action("PartialSchedule", "Schedule")',
            type: 'GET',
            data: {
                weekOffset: weekOffset,
                filterType: selectedFilter // Gửi kiểu filter: all, schedule, or exam
            },
            success: function (result) {
                // Cập nhật nội dung PartialSchedule
                $("#schedule-container").html(result);
            }
        });
    });
});
    </script>
}








